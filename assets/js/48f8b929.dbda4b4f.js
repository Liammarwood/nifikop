"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[54073],{33713:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var i=s(24246),a=s(71670);const t={id:"3_managed_groups",title:"Managed groups",sidebar_label:"Managed groups"},o=void 0,r={id:"3_manage_nifi/2_manage_users_and_accesses/3_managed_groups",title:"Managed groups",description:"In some case these two features could be heavy to define, for example when you have 10 dataflows with one cluster for each of them, it will lead in a lot of .yaml files ...",source:"@site/../docs/3_manage_nifi/2_manage_users_and_accesses/3_managed_groups.md",sourceDirName:"3_manage_nifi/2_manage_users_and_accesses",slug:"/3_manage_nifi/2_manage_users_and_accesses/3_managed_groups",permalink:"/nifikop/docs/next/3_manage_nifi/2_manage_users_and_accesses/3_managed_groups",draft:!1,unlisted:!1,editUrl:"https://github.com/konpyutaika/nifikop/edit/master/site/website/../docs/3_manage_nifi/2_manage_users_and_accesses/3_managed_groups.md",tags:[],version:"current",lastUpdatedBy:"Alexandre Guitton",lastUpdatedAt:1668873143,formattedLastUpdatedAt:"Nov 19, 2022",frontMatter:{id:"3_managed_groups",title:"Managed groups",sidebar_label:"Managed groups"},sidebar:"docs",previous:{title:"Groups management",permalink:"/nifikop/docs/next/3_manage_nifi/2_manage_users_and_accesses/2_groups_management"},next:{title:"Design Principles",permalink:"/nifikop/docs/next/3_manage_nifi/3_manage_dataflows/0_design_principles"}},d={},c=[];function l(e){const n={admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["In some case these two features could be heavy to define, for example when you have 10 dataflows with one cluster for each of them, it will lead in a lot of ",(0,i.jsx)(n.code,{children:".yaml"})," files ...\nTo simplify this, we implement in the operator 2 ",(0,i.jsx)(n.code,{children:"managed groups"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Admins :"})," a group giving access to everything on the NiFi Cluster,"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Readers :"})," a group giving access as viewer on the NiFi Cluster."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can directly define the list of users who belong to each of them in the ",(0,i.jsx)(n.code,{children:"NifiCluster.Spec"})," field :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: nifi.konpyutaika.com/v1\nkind: NifiCluster\nmetadata:\n  name: mynifi\nspec:\n  ...\n  oneNifiNodePerNode: false\n  #\n  propagateLabels: true\n  managedAdminUsers:\n    -  identity : "alexandre.guitton@konpyutaika.com"\n       name: "aguitton"\n    -  identity : "nifiuser@konpyutaika.com"\n       name: "nifiuser"\n  managedReaderUsers:\n    -  identity : "toto@konpyutaika.com"\n       name: "toto"\n    ...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example the operator will create and manage 3 ",(0,i.jsx)(n.code,{children:"NifiUsers"})," :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"aguitton"}),", with the identity : ",(0,i.jsx)(n.code,{children:"alexandre.guitton@konpyutaika.com"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"nifiuser"}),", with the identity : ",(0,i.jsx)(n.code,{children:"nifiuser@konpyutaika.com"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"toto"}),", with the identity : ",(0,i.jsx)(n.code,{children:"toto@konpyutaika.com"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"And create and manage two groups :"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"managed-admins :"})," that will contain 3 users (",(0,i.jsx)(n.strong,{children:"aguitton"}),", ",(0,i.jsx)(n.strong,{children:"nifiuser"}),", ",(0,i.jsx)(n.strong,{children:"nc-controller.nifikop.mgt.cluster.local"})," which is the controller user)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"managed-readers :"})," that will contain 1 user (",(0,i.jsx)(n.strong,{children:"toto"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["And the rest of the stuff will be reconciled and managed as described for ",(0,i.jsx)(n.code,{children:"NifiUsers"})," and ",(0,i.jsx)(n.code,{children:"NifiUserGroups"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["There is one more group that is created and managed by the operator, this is the ",(0,i.jsx)(n.strong,{children:"managed-nodes"})," group, for each node a ",(0,i.jsx)(n.code,{children:"NifiUser"})," is created, and we automatically add them to this group to give them the right list of accesses."]}),(0,i.jsxs)(n.p,{children:["To get the list of managed groups just check the list of ",(0,i.jsx)(n.code,{children:"NifiUserGroup"})," :"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"kubectl get -n nifikop nifiusergroups.nifi.konpyutaika.com \nNAME              AGE\nmanaged-admins    6d7h\nmanaged-nodes     6d7h\nmanaged-readers   6d7h\n"})})]})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},71670:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>o});var i=s(27378);const a={},t=i.createContext(a);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);